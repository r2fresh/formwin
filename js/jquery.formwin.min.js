(function(a){a.formwin={defaults:{formWinClassSel:"",formWinSelector:"select, textarea, input[type=text], input[type=checkbox], input[type=radio], input[type=button]",activeClass:"active",focusClass:"focus",hoverClass:"hover",disabledClass:"disabled",checkedClass:"checked",placeholderColor:"gray",selectWidthAdapt:27}};var f=!1,h=!1,i={select:function(b,c){var d=a("div.selectedvalue",b.parent()),e=function(){d.html((b.find(":selected:first")||b.find("option:first")).html());b.parent().removeClass(c.activeClass)};
d.width(b.width()-c.selectWidthAdapt);b.width("100%");e();g(b,{change:e});var f=function(){return!1};a(d).each(function(){this.onselectstart=this.ondragstart=f;a(this).mousedown(f).css({MozUserSelect:"none"})});return b},textarea:function(){!1===h&&(a('<img src="../img/formwin-input-active.png">'),a('<img src="../img/formwin-input-disabled.png">'),a('<img src="../img/formwin-input-focus.png">'),a('<img src="../img/formwin-input-hover.png">'),a('<img src="../img/formwin-input-negative-focus.png">'),
a('<img src="../img/formwin-input-negative-hover.png">'),a('<img src="../img/formwin-input-negative.png">'),a('<img src="../img/formwin-input-normal.png">'),a('<img src="../img/formwin-input-positive-focus.png">'),a('<img src="../img/formwin-input-positive-hover.png">'),a('<img src="../img/formwin-input-positive.png">'),h=!0)},checkbox:function(b,c){var d=b.parent();a("div.checkedvalue",d);var e=function(){!0===b.is(":checked")?d.addClass(c.checkedClass):d.removeClass(c.checkedClass)};e();g(b,{"click touchend":e})},
radio:function(b,c){var d=b.parent();a("div.checkedvalue",d);var e=function(){!0===b.is(":checked")&&(a("input[name="+b.attr("name")+"]:radio").each(function(){a(this).parent().removeClass(c.checkedClass)}),d.addClass(c.checkedClass))};e();g(b,{"click touchend":function(){e()}})}},g=function(a,c){for(var d in c)c.hasOwnProperty(d)&&a.bind(d,c[d])},j=function(b,c){var d=a(b).attr("placeholder");"undefined"!==typeof d&&""!==d&&(d===a(b).val()&&a(b).val(""),""===a(b).val()&&a(b).val(d).css("color",c.placeholderColor).addClass("formwin-showplaceholder"))};
a.formwin.init=function(b){b=a.extend({},a.formwin.defaults,b);if(a.browser.msie){if(8>a.browser.version)return!1;9>a.browser.version&&(f=!0)}a("div.formwinbutton").each(function(){var c=this;!0===a("input, button",this).is(":disabled")?a(c).addClass(b.disabledClass):a(c).removeClass(b.disabledClass);a("input, button",this).focus(function(){a(c).addClass(b.focusClass)}).blur(function(){a(c).removeClass(b.focusClass);a(c).removeClass(b.activeClass)}).on("mouseenter",function(){a(c).addClass(b.hoverClass)}).on("mouseleave",
function(){a(c).removeClass(b.hoverClass);a(c).removeClass(b.activeClass)}).on("keydown mousedown touchbegin",function(){a(c).addClass(b.activeClass)}).on("keyup mouseup touchend",function(){a(c).removeClass(b.activeClass)})});a("label"+b.formWinClassSel).each(function(){var c="",d="",e=this;a(this).children(b.formWinSelector).each(function(){c=a(this)[0].outerHTML.match(/[^<][^ ]*/)[0].toLowerCase();if(!0===f&&("textarea"===c||"input"===c)&&"undefined"!==typeof a(this).attr("placeholder"))a(this).data("formwinOriginalColor",
a(this).css("color")),j(this,b);a(this).focus(function(){a(e).addClass(b.focusClass);!0===f&&("undefined"!==typeof a(this).attr("placeholder")&&a(this).hasClass("formwin-showplaceholder"))&&a(this).val("").css("color",a(this).data("formwinOriginalColor"))}).blur(function(){a(e).removeClass(b.focusClass);a(e).removeClass(b.activeClass);!0===f&&"undefined"!==typeof a(this).attr("placeholder")&&(""===a(this).val()?j(this,b):a(this).removeClass("formwin-showplaceholder"))}).on("mouseenter",function(){a(e).addClass(b.hoverClass)}).on("mouseleave",
function(){a(e).removeClass(b.hoverClass);a(e).removeClass(b.activeClass)}).on("keydown mousedown touchbegin",function(){a(e).addClass(b.activeClass)}).on("keyup mouseup touchend",function(){a(e).removeClass(b.activeClass)});!0===a(this).is(":disabled")?a(e).addClass(b.disabledClass):a(e).removeClass(b.disabledClass);d="input"===c?a(this).attr("type").toLowerCase():c;if("undefined"!==typeof i[d])i[d](a(this),b)})})};a.formwin.fixlabels=function(b){b=a.extend({},a.formwin.defaults,b);a("label"+b.formWinClassSel+
".above, label"+b.formWinClassSel+".below").each(function(){var b=a("span",this),d=b.css("white-space"),e=0;b.css("white-space","nowrap");e=b.width();b.css("white-space",d);e>a("textarea, input, select",this).width()&&b.parent().css("width",e+"px")});a("label"+b.formWinClassSel+".left, label"+b.formWinClassSel+".right").each(function(){var b=a("span",this).css("white-space","nowrap"),d=b.width(),e="right";a(this).hasClass("left")&&(e="left");a(this).css("margin-"+e,d+10+"px");b.css(e,-1*(d+10)+"px")})}})(jQuery);
