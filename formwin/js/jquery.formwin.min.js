(function(a){a.formwin={defaults:{formWinClassSel:"",formWinSelector:"select, textarea, input[type=text], input[type=checkbox], input[type=radio], input[type=button]",activeClass:"active",focusClass:"focus",hoverClass:"hover",disabledClass:"disabled",checkedClass:"checked",placeholderColor:"gray",selectedvalueBorders:46,imagePath:""}};var f=!1,h=!1,i={select:function(b,c){var e=a("div.selectedvalue",b.parent()),d=function(){e.html((b.find(":selected:first")||b.find("option:first")).html());b.parent().removeClass(c.activeClass)};
e.width(b.width()-c.selectedvalueBorders);b.width("100%").height("100%");d();g(b,{change:d});var f=function(){return!1};a(e).each(function(){this.onselectstart=this.ondragstart=f;a(this).mousedown(f).css({MozUserSelect:"none"})});return b},textarea:function(b,c){!1===h&&(a('<img src="'+c.imagePath+'formwin-input-active.png">'),a('<img src="'+c.imagePath+'formwin-input-disabled.png">'),a('<img src="'+c.imagePath+'formwin-input-focus.png">'),a('<img src="'+c.imagePath+'formwin-input-hover.png">'),a('<img src="'+
c.imagePath+'formwin-input-negative-focus.png">'),a('<img src="'+c.imagePath+'formwin-input-negative-hover.png">'),a('<img src="'+c.imagePath+'formwin-input-negative.png">'),a('<img src="'+c.imagePath+'formwin-input-normal.png">'),a('<img src="'+c.imagePath+'formwin-input-positive-focus.png">'),a('<img src="'+c.imagePath+'formwin-input-positive-hover.png">'),a('<img src="'+c.imagePath+'formwin-input-positive.png">'),h=!0)},checkbox:function(a,c){var e=a.parent(),d=function(){!0===a.is(":checked")?
e.addClass(c.checkedClass):e.removeClass(c.checkedClass)};d();g(a,{"click touchend":d})},radio:function(b,c){var e=b.parent(),d=function(){!0===b.is(":checked")&&(a("input[name="+b.attr("name")+"]:radio").each(function(){a(this).parent().removeClass(c.checkedClass)}),e.addClass(c.checkedClass))};d();g(b,{"click touchend":function(){d()}})}},g=function(a,c){for(var e in c)c.hasOwnProperty(e)&&a.bind(e,c[e])},j=function(b,c){var e=a(b).attr("placeholder");"undefined"!==typeof e&&""!==e&&(e===a(b).val()&&
a(b).val(""),""===a(b).val()&&a(b).val(e).css("color",c.placeholderColor).addClass("formwin-showplaceholder"))};a.formwin.init=function(b){b=a.extend({},a.formwin.defaults,b);if(a.browser.msie){if(8>a.browser.version)return!1;9>a.browser.version&&(f=!0)}""===b.imagePath&&a("script").each(function(){var c=a(this).attr("src");"undefined"!==typeof c&&0<=c.indexOf("jquery.formwin")&&(b.imagePath=c.substr(0,c.lastIndexOf("/")+1),b.imagePath+="../img/")});a("div.formwinbutton").each(function(){var c=this;
!0===a("input, button",this).is(":disabled")?a(c).addClass(b.disabledClass):a(c).removeClass(b.disabledClass);a("input, button",this).focus(function(){a(c).addClass(b.focusClass)}).blur(function(){a(c).removeClass(b.focusClass);a(c).removeClass(b.activeClass)}).on("mouseenter",function(){a(c).addClass(b.hoverClass)}).on("mouseleave",function(){a(c).removeClass(b.hoverClass);a(c).removeClass(b.activeClass)}).on("keydown mousedown touchbegin",function(){a(c).addClass(b.activeClass)}).on("keyup mouseup touchend",
function(){a(c).removeClass(b.activeClass)})});a("label"+b.formWinClassSel).each(function(){var c="",e="",d=this;a(this).children(b.formWinSelector).each(function(){c=a(this)[0].outerHTML.match(/[^<][^ ]*/)[0].toLowerCase();if(!0===f&&("textarea"===c||"input"===c)&&"undefined"!==typeof a(this).attr("placeholder"))a(this).data("formwinOriginalColor",a(this).css("color")),j(this,b);a(this).focus(function(){a(d).addClass(b.focusClass);!0===f&&("undefined"!==typeof a(this).attr("placeholder")&&a(this).hasClass("formwin-showplaceholder"))&&
a(this).val("").css("color",a(this).data("formwinOriginalColor"))}).blur(function(){a(d).removeClass(b.focusClass);a(d).removeClass(b.activeClass);!0===f&&"undefined"!==typeof a(this).attr("placeholder")&&(""===a(this).val()?j(this,b):a(this).removeClass("formwin-showplaceholder"))}).on("mouseenter",function(){a(d).addClass(b.hoverClass)}).on("mouseleave",function(){a(d).removeClass(b.hoverClass);a(d).removeClass(b.activeClass)}).on("keydown mousedown touchbegin",function(){a(d).addClass(b.activeClass)}).on("keyup mouseup touchend",
function(){a(d).removeClass(b.activeClass)});!0===a(this).is(":disabled")?a(d).addClass(b.disabledClass):a(d).removeClass(b.disabledClass);e="input"===c?a(this).attr("type").toLowerCase():c;if("undefined"!==typeof i[e])i[e](a(this),b)})})};a.formwin.fixlabels=function(b){b=a.extend({},a.formwin.defaults,b);a("label"+b.formWinClassSel+".above, label"+b.formWinClassSel+".below").each(function(){var b=a("span",this),e=b.css("white-space"),d=0;b.css("white-space","nowrap");d=b.width();b.css("white-space",
e);d>a("textarea, input, select",this).width()&&b.parent().css("width",d+"px")});a("label"+b.formWinClassSel+".left, label"+b.formWinClassSel+".right").each(function(){var b=a("span",this).css("white-space","nowrap"),e=b.width(),d="right";a(this).hasClass("left")&&(d="left");a(this).css("margin-"+d,e+10+"px");b.css(d,-1*(e+10)+"px")})}})(jQuery);
